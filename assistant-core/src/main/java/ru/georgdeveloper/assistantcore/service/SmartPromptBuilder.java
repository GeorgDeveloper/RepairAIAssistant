package ru.georgdeveloper.assistantcore.service;

/**
 * –¶–µ–Ω—Ç—Ä–∞–ª–∏–∑–æ–≤–∞–Ω–Ω—ã–π –±–∏–ª–¥–µ—Ä —Å–∏—Å—Ç–µ–º–Ω—ã—Ö –ø—Ä–æ–º–ø—Ç–æ–≤ –¥–ª—è Kvant AI.
 * –ê–¥–∞–ø—Ç–∏—Ä–æ–≤–∞–Ω –ø–æ–¥ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ –∫–æ–Ω—Ç–µ–∫—Å—Ç–∞ –∏–∑ –≤–µ–∫—Ç–æ—Ä–Ω–æ–π –ë–î –∏ –¥–æ–º–µ–Ω —Ä–µ–º–æ–Ω—Ç–∞.
 */
public final class SmartPromptBuilder {

    private SmartPromptBuilder() {}

    private static final String SYSTEM_PROMPT = """
            –°–ò–°–¢–ï–ú–ê: –¢—ã ‚Äî Kvant AI, —ç–∫—Å–ø–µ—Ä—Ç –ø–æ —Ä–µ–º–æ–Ω—Ç—É –∏ –æ–±—Å–ª—É–∂–∏–≤–∞–Ω–∏—é –ø—Ä–æ–º—ã—à–ª–µ–Ω–Ω–æ–≥–æ –æ–±–æ—Ä—É–¥–æ–≤–∞–Ω–∏—è.
            –¢–≤–æ—è —Å–ø–µ—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è: –∞–Ω–∞–ª–∏–∑ –¥–∞–Ω–Ω—ã—Ö –æ —Ä–µ–º–æ–Ω—Ç–∞—Ö, –¥–∏–∞–≥–Ω–æ—Å—Ç–∏–∫–∞ –Ω–µ–∏—Å–ø—Ä–∞–≤–Ω–æ—Å—Ç–µ–π, –ø–æ—à–∞–≥–æ–≤—ã–µ –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏–∏ –ø–æ —É—Å—Ç—Ä–∞–Ω–µ–Ω–∏—é –ø—Ä–æ–±–ª–µ–º.

            –ö–õ–Æ–ß–ï–í–´–ï –ü–†–ò–ù–¶–ò–ü–´:
            ‚Ä¢ –ò—Å–ø–æ–ª—å–∑—É–π –¢–û–õ–¨–ö–û –ø—Ä–µ–¥–æ—Å—Ç–∞–≤–ª–µ–Ω–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ - –Ω–µ –¥–æ–º—ã—Å–ª–∏–≤–∞–π!
            ‚Ä¢ –û—Ç–≤–µ—á–∞–π –∫–æ–Ω–∫—Ä–µ—Ç–Ω–æ –∏ –ø–æ –¥–µ–ª—É - –±–µ–∑ –ª–∏—à–Ω–∏—Ö —Å–ª–æ–≤
            ‚Ä¢ –°—Ç—Ä—É–∫—Ç—É—Ä–∏—Ä—É–π –æ—Ç–≤–µ—Ç —Å –ø–æ–º–æ—â—å—é –Ω—É–º–µ—Ä–∞—Ü–∏–∏ –∏ —ç–º–æ–¥–∑–∏
            ‚Ä¢ –£–∫–∞–∑—ã–≤–∞–π –∫–æ–Ω–∫—Ä–µ—Ç–Ω—ã–µ –Ω–∞–∑–≤–∞–Ω–∏—è –æ–±–æ—Ä—É–¥–æ–≤–∞–Ω–∏—è –∏–∑ –∫–æ–Ω—Ç–µ–∫—Å—Ç–∞
            ‚Ä¢ –ü—Ä–∏ –Ω–µ–¥–æ—Å—Ç–∞—Ç–∫–µ –¥–∞–Ω–Ω—ã—Ö - —á–µ—Å—Ç–Ω–æ –æ–± —ç—Ç–æ–º —Å–æ–æ–±—â–∞–π
            """;

    public static String buildRepair(String context, String query) {
        String safeContext = (context == null || context.isBlank())
                ? "–ü–æ –≤–∞—à–µ–º—É –∑–∞–ø—Ä–æ—Å—É –Ω–µ –Ω–∞–π–¥–µ–Ω–æ —Å–ø–µ—Ü–∏—Ñ–∏—á–Ω—ã—Ö –¥–∞–Ω–Ω—ã—Ö –≤ –±–∞–∑–µ —Ä–µ–º–æ–Ω—Ç–æ–≤."
                : context;

        return SYSTEM_PROMPT + "\n\n" +
                "üìÅ –î–ê–ù–ù–´–ï –ò–ó –ë–ê–ó–´ –†–ï–ú–û–ù–¢–û–í:\n" + safeContext + "\n\n" +
                "‚ùì –í–û–ü–†–û–° –ü–û–õ–¨–ó–û–í–ê–¢–ï–õ–Ø: " + query + "\n\n" +
                "üéØ –ó–ê–î–ê–ù–ò–ï: –ü—Ä–æ–∞–Ω–∞–ª–∏–∑–∏—Ä—É–π –ø—Ä–æ–±–ª–µ–º—É –∏ –¥–∞–π –ø–æ—à–∞–≥–æ–≤—É—é –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏—é (5-8 –ø—É–Ω–∫—Ç–æ–≤).\n" +
                "–û–±—è–∑–∞—Ç–µ–ª—å–Ω–æ —É–∫–∞–∂–∏ –∫–æ–Ω–∫—Ä–µ—Ç–Ω–æ–µ –æ–±–æ—Ä—É–¥–æ–≤–∞–Ω–∏–µ, –µ—Å–ª–∏ –æ–Ω–æ —É–ø–æ–º–∏–Ω–∞–µ—Ç—Å—è –≤ –¥–∞–Ω–Ω—ã—Ö.\n\n" +
                "üîß –û–¢–í–ï–¢:";
    }

    public static String buildStatistics(String context, String query) {
        String safeContext = (context == null || context.isBlank())
                ? "–ù–µ–¥–æ—Å—Ç–∞—Ç–æ—á–Ω–æ –¥–∞–Ω–Ω—ã—Ö –¥–ª—è –ø–æ–ª–Ω–æ—Ü–µ–Ω–Ω–æ–≥–æ —Å—Ç–∞—Ç–∏—Å—Ç–∏—á–µ—Å–∫–æ–≥–æ –∞–Ω–∞–ª–∏–∑–∞."
                : context;

        return SYSTEM_PROMPT + "\n\n" +
                "üìà –î–ê–ù–ù–´–ï –î–õ–Ø –ê–ù–ê–õ–ò–ó–ê:\n" + safeContext + "\n\n" +
                "‚ùì –ó–ê–ü–†–û–° –ù–ê –ê–ù–ê–õ–ò–ó: " + query + "\n\n" +
                "üéØ –ó–ê–î–ê–ù–ò–ï: –ü—Ä–æ–≤–µ–¥–∏ —Å—Ç–∞—Ç–∏—Å—Ç–∏—á–µ—Å–∫–∏–π –∞–Ω–∞–ª–∏–∑ –∏ –ø—Ä–µ–¥–æ—Å—Ç–∞–≤—å:\n" +
                "1Ô∏è‚É£ –ö–ª—é—á–µ–≤—ã–µ –ø–æ–∫–∞–∑–∞—Ç–µ–ª–∏ –∏ —Ç—Ä–µ–Ω–¥—ã\n" +
                "2Ô∏è‚É£ –ß–∞—Å—Ç–æ—Ç—É –∏ –ø—Ä–∏—á–∏–Ω—ã –ø—Ä–æ–±–ª–µ–º\n" +
                "3Ô∏è‚É£ –ü—Ä–∞–∫—Ç–∏—á–µ—Å–∫–∏–µ —Ä–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏ (3-4 –ø—É–Ω–∫—Ç–∞)\n\n" +
                "üìä –û–¢–í–ï–¢:";
    }

    public static String buildGeneral(String context, String query, boolean useContext) {
        String contextBlock = useContext && context != null && !context.isBlank()
                ? "üìÅ –î–û–°–¢–£–ü–ù–ê–Ø –ò–ù–§–û–†–ú–ê–¶–ò–Ø:\n" + context + "\n\n"
                : "";

        return SYSTEM_PROMPT + "\n\n" +
                contextBlock +
                "‚ùì –í–û–ü–†–û–° –ü–û–õ–¨–ó–û–í–ê–¢–ï–õ–Ø: " + query + "\n\n" +
                "üéØ –ó–ê–î–ê–ù–ò–ï: –û—Ç–≤–µ—Ç—å –∫–æ–Ω–∫—Ä–µ—Ç–Ω–æ –∏ –ø–æ –¥–µ–ª—É (–¥–æ 5-6 –ø—Ä–µ–¥–ª–æ–∂–µ–Ω–∏–π).\n" +
                "–ï—Å–ª–∏ –≤ –¥–æ—Å—Ç—É–ø–Ω–æ–π –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–∏ –Ω–µ—Ç –æ—Ç–≤–µ—Ç–∞ - —á–µ—Å—Ç–Ω–æ –æ–± —ç—Ç–æ–º —Å–æ–æ–±—â–∏.\n\n" +
                "ü§ñ –û–¢–í–ï–¢:";
    }
}


