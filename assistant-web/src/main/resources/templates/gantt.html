<!DOCTYPE html>
<html lang="ru" xmlns:th="http://www.thymeleaf.org">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Диаграмма Ганта - Breakdown ремонты</title>
    <link rel="stylesheet" href="/static/styles/style.css">
    <link href="/static/select2/select2.min.css" rel="stylesheet" />
    <link href="/static/flatpickr/flatpickr.min.css" rel="stylesheet">
    <link rel="stylesheet" href="/static/styles/gantt.css">
</head>

<body>

    <div th:replace="~{fragments/navigation :: nav}"></div>

    <div class="total-content">
        <div class="header">
            <div class="user_logo">
                Привет, <a href="#">user</a>
            </div>
        </div>

        <div class="main-content">
            <div class="container">
                <h1>Диаграмма Ганта - Breakdown ремонты оборудования</h1>
                
                <div class="gantt-filters">
                    <div class="filter-group">
                        <label for="date-from">Дата и время с:</label>
                        <input type="text" id="date-from" class="filter-control" placeholder="Выберите дату">
                    </div>
                    
                    <div class="filter-group">
                        <label for="date-to">Дата и время по:</label>
                        <input type="text" id="date-to" class="filter-control" placeholder="Выберите дату">
                    </div>
                    
                    <div class="filter-group">
                        <label for="area">Участок:</label>
                        <select id="area" class="filter-control">
                            <option value="all">Все участки</option>
                            <option value="BuildingArea">BuildingArea</option>
                            <option value="CuringArea">CuringArea</option>
                            <option value="SemifinishingArea">SemifinishingArea</option>
                            <option value="FinishigArea">FinishigArea</option>
                            <option value="NewMixingArea">NewMixingArea</option>
                        </select>
                    </div>
                    
                    <div class="filter-group">
                        <label for="equipment">Оборудование:</label>
                        <select id="equipment" class="filter-control" multiple="multiple">
                            <option value="all">Всё оборудование</option>
                        </select>
                    </div>
                    
                    <div class="filter-group">
                        <label for="failure-type">Тип поломки:</label>
                        <select id="failure-type" class="filter-control" multiple="multiple">
                            <option value="all">Все типы</option>
                            <option value="Механика">Механика</option>
                            <option value="Электроника">Электроника</option>
                            <option value="Электрика">Электрика</option>
                            <option value="Другие">Другие</option>
                        </select>
                    </div>
                    
                    <div class="filter-group">
                        <label for="status">Статус:</label>
                        <select id="status" class="filter-control" multiple="multiple">
                            <option value="all">Все статусы</option>
                            <option value="Закрыто">Закрыто</option>
                            <option value="Выполнено">Выполнено</option>
                        </select>
                    </div>
                    
                    <button id="apply-filters" class="btn-apply">Применить фильтры</button>
                </div>
                
                <div class="loading" id="loading">Загрузка данных...</div>
                <div class="error" id="error"></div>
                
                <div class="zoom-controls">
                    <button id="zoom-out" class="zoom-btn">-</button>
                    <span id="zoom-level">100%</span>
                    <button id="zoom-in" class="zoom-btn">+</button>
                </div>
                
                <div class="gantt-container">
                    <div class="gantt-header">
                        <div class="machine-name">Оборудование</div>
                        <div class="time-slots" id="time-header"></div>
                    </div>
                    <div class="gantt-body" id="gantt-body"></div>
                </div>
                
                <div class="legend">
                    <div class="legend-item">
                        <div class="legend-color" style="background-color: #3498db;"></div>
                        <span>Механика</span>
                    </div>
                    <div class="legend-item">
                        <div class="legend-color" style="background-color: #e74c3c;"></div>
                        <span>Электроника</span>
                    </div>
                    <div class="legend-item">
                        <div class="legend-color" style="background-color: #f39c12;"></div>
                        <span>Электрика</span>
                    </div>
                    <div class="legend-item">
                        <div class="legend-color" style="background-color: #2ecc71;"></div>
                        <span>Другие</span>
                    </div>
                </div>
                
                <div class="summary">
                    <h3>Сводка по простоям</h3>
                    <div class="summary-stats">
                        <div class="stat-item">
                            <strong>Общее количество ремонтов:</strong> <span id="total-repairs">0</span>
                        </div>
                        <div class="stat-item">
                            <strong>Общее время простоя:</strong> <span id="total-downtime">00:00:00</span>
                        </div>
                        <div class="stat-item">
                            <strong>Среднее время ремонта:</strong> <span id="avg-repair-time">00:00:00</span>
                        </div>
                        <div class="stat-item">
                            <strong>Наиболее частая поломка:</strong> <span id="most-common-failure">-</span>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <script src="/static/jquery/jquery-3.6.0.min.js"></script>
    <script src="/static/select2/select2.min.js"></script>
    <script src="/static/flatpickr/flatpickr.min.js"></script>
    <script src="/static/flatpickr/ru.js"></script>
    <script src="/static/js/gantt.js"></script>

</body>

</html>
